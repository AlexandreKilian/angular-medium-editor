/**
 * angular-medium-editor
 * @version v0.0.5 - 2015-07-30
 * @link https://github.com/thijsw/angular-medium-editor
 * @author Thijs Wijnmaalen <thijs@wijnmaalen.name>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("angular-medium-editor",[]).directive("mediumEditor",function(){return{require:"ngModel",restrict:"AE",scope:{bindOptions:"=",editable:"="},link:function(a,b,c,d){angular.element(b).addClass("angular-medium-editor");var e={},f="",g=function(){c.options&&(e=a.$eval(c.options));var b={};void 0!==a.bindOptions&&(b=a.bindOptions),e=angular.extend(e,b)};g(),f=e.placeholder,a.$watch("bindOptions",function(){if(d.editor&&d.editor.destroy(),g(),d.$isEmpty(d.$viewValue)||(e.placeholder=""),d.editor=new MediumEditor(b,e),c.events){var f=a.$eval(c.events);for(var h in f){var i=f[h];d.editor.subscribe(h,a.$parent[i])}}}),a.$watch("editable",function(a){a?d.editor.setup():d.editor.destroy()});var h=function(){a.$apply(function(){if("<p><br></p>"===b.html()||""===b.html()){e.placeholder=f;var g=new MediumEditor(b,e);if(c.events){var h=a.$eval(c.events);for(var i in h){var j=h[i];g.subscribe(i,a.$parent[j])}}}d.$setViewValue(b.html())})};b.on("blur",h),b.on("input",h),d.$render=function(){if(!this.editor&&(d.$isEmpty(d.$viewValue)||(e.placeholder=""),this.editor=new MediumEditor(b,e),c.events)){var f=a.$eval(c.events);for(var g in f){var h=f[g];this.editor.subscribe(g,a.$parent[h])}}b.html(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}}});